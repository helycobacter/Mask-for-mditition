<style>
    /* ... попередні стилі ... */
    .controls { 
        position: absolute; bottom: 0; left: 0; width: 100%; 
        z-index: 110; display: none; flex-direction: column; 
        background: linear-gradient(transparent, rgba(0,0,0,0.9));
        padding-bottom: 25px; padding-top: 40px;
        transition: opacity 1s ease-in-out; /* Плавне зникнення */
        opacity: 1;
    }
    /* Клас для приховування */
    .controls.hidden { opacity: 0; pointer-events: none; }
</style>

<script>
    let uiTimeout;
    const uiPanel = document.getElementById('ui');

    // Функція для показу/приховування інтерфейсу
    function showUI() {
        uiPanel.classList.remove('hidden');
        clearTimeout(uiTimeout);
        // Приховати через 3 секунди, якщо активовано резонанс
        if (isLaunched) {
            uiTimeout = setTimeout(() => {
                uiPanel.classList.add('hidden');
            }, 3000);
        }
    }

    // Слухаємо дотики до екрана для повернення кнопок
    document.addEventListener('touchstart', showUI);
    document.addEventListener('mousemove', showUI);

    async function start() {
        if (isLaunched) return;
        // ... (ваш існуючий код функції start) ...
        
        document.getElementById('intro').style.opacity = '0';
        setTimeout(() => {
            document.getElementById('intro').style.display = 'none';
            uiPanel.style.display = 'flex';
            showUI(); // Запускаємо таймер приховування
        }, 800);
        isLaunched = true;
    }

    function toggleFullScreen() {
        if (!document.fullscreenElement) {
            document.documentElement.requestFullscreen().catch(()=>{});
        } else {
            if (document.exitFullscreen) document.exitFullscreen();
        }
        showUI(); // Показати кнопки після перемикання
    }

    // Решта функцій (init, render, getCenter, drawZenFlower) залишаються без змін
</script>